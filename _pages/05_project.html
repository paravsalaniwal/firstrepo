---
layout: base
permalink: /JSproject/
title: JS Project ðŸ’»
---
<!DOCTYPE html>
<html>
<head>
  <title>Music Search</title>
  <style>
    /* CSS styles for the table and input */
    table {
      border-collapse: collapse;
      width: 100%;
    }

    th, td {
      text-align: left;
      padding: 8px;
    }

    th {
      cursor: pointer;
    }

    input[type="text"] {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
    }

    /* CSS styles for the album artwork */
    .album-artwork {
      width: 100px;
      height: auto;
    }
  </style>
</head>
<body>
  <h1>Music Search</h1>

  <!-- Input field for searching by song title -->
  <input type="text" id="searchInput" placeholder="Search by Song Title..." />

  <!-- Table to display the music search results -->
  <table id="dataTable">
    <thead>
      <!-- Table header row with sortable column headers -->
      <tr>
        <th onclick="sortTable(0)">Track Name</th>
        <th onclick="sortTable(1)">Artist</th>
        <th onclick="sortTable(2)">Genre</th>
        <th onclick="sortTable(3)">Album</th>
        <th onclick="sortTable(4)">Duration</th>
        <th onclick="sortTable(5)">Album Artwork</th>
        <th onclick="sortTable(6)">Preview</th>
      </tr>
    </thead>
    <tbody id="dataBody"></tbody>
  </table>

  <script>
    // Fetch music data from the iTunes Search API and populate the table
    async function fetchMusicData() {
      const searchTerm = document.getElementById('searchInput').value;
      const response = await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(searchTerm)}&entity=song&limit=50`);
      const data = await response.json();
      const tableBody = document.getElementById('dataBody');

      // Clear the table body before populating new data
      tableBody.innerHTML = '';

      // Loop through each song result and create a new table row for each song
      data.results.forEach(song => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${song.trackName}</td>
          <td>${song.artistName}</td>
          <td>${song.primaryGenreName}</td>
          <td>${song.collectionName}</td>
          <td>${formatDuration(song.trackTimeMillis)}</td>
          <td><img class="album-artwork" src="${song.artworkUrl100}" alt="Album Artwork"></td>
          <td><audio src="${song.previewUrl}" controls></audio></td>
        `;
        tableBody.appendChild(row);
      });
    }

    // Sorting the table based on the clicked column header
    function sortTable(columnIndex) {
      const table = document.getElementById('dataTable');
      const rows = Array.from(table.rows).slice(1); // Exclude header row
      const isAscending = table.rows[0].cells[columnIndex].classList.toggle('asc');

      // Sort the rows based on the clicked column index and ascending/descending order
      rows.sort((row1, row2) => {
        const cellValue1 = row1.cells[columnIndex].innerText;
        const cellValue2 = row2.cells[columnIndex].innerText;

        // Compare the cell values as strings or numbers depending on their type
        if (isNaN(cellValue1) || isNaN(cellValue2)) {
          return cellValue1.localeCompare(cellValue2);
        } else {
          return cellValue1 - cellValue2;
        }
      });

      // Reverse the rows if the order is descending
      if (!isAscending) {
        rows.reverse();
      }

      // Append the sorted rows back to the table body
      table.tBodies[0].append(...rows);
    }

    // Formatting duration from milliseconds to minutes:seconds
    function formatDuration(durationInMillis) {
      const minutes = Math.floor(durationInMillis / 60000);
      const seconds = ((durationInMillis % 60000) / 1000).toFixed(0);
      return `${minutes}:${seconds.padStart(2, '0')}`;
    }

    // Trigger search and data fetching when Enter key is pressed
    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('keyup', function(event) {
      if (event.key === 'Enter') {
        fetchMusicData();
      }
    });

    // Fetch music data when the page loads
    fetchMusicData();
  </script>
</body>
</html>
